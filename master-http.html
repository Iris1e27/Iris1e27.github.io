<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<link rel="stylesheet" type="text/css" href="css/CustomSetting.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🛤️&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>

  <title>透视HTTP协议&nbsp;|&nbsp;Jingtian的博客</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="透视HTTP协议">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📺&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🛤️&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🐣&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>About</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="tags.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🔖&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Tags</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="project.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📁&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Project</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="discussion.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🗣️&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Discusion</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="links.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🔗&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Links</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="todo.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📌&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>To-Do</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
    <div class="Header__Spacer Header__Spacer--NoCover">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;📺&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">透视HTTP协议</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Tue, Feb 21, 2023</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--red">
            <a href="tag/总结.html">总结</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--orange">
            <a href="tag/前端.html">前端</a>
          </span>
        
      </div>
    
  </header>
    <div id="content-html"></div>
  <article id="https://www.notion.so/cafe543c541a47729fc1b0eceefc4f83" class="PageRoot"><div id="https://www.notion.so/42960e6d23684a7789784d4a742c2501" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">来自cjr学姐的推荐：透视 HTTP 协议：</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://time.geekbang.org/column/intro/100029001">https://time.geekbang.org/column/intro/100029001</a></span></span></p></div><ul id="https://www.notion.so/9130c4cd2862478491ffb7b07a5473a0" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/92da497802f541e9ba56674d95aadc1e"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">破冰篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/16e9357e8d534704b9360bf23214d460"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP过去</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/de78da6688754368b744fa31e1240e9e"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP是什么</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/5f654059da2447d180daf90983baceb2"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP的各种概念：浏览器、服务器、CDN、爬虫、HTML、网络服务、WAF、TCP/IP、DNS、URI/URL、HTTPS、代理</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c705107a963a43d089fd0c6956378b77"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">四层和七层：TCP、OSI</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/6c85f731b16b41db9e67e1152ce23d79"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">域名与域名解析过程</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/73cc77cc0cec4910b39411c3bd3f2312"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">实验工具：Wireshark、Chrome、OpenResty、Telnet</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/eae8e51ee07a46928d1281bbd1eace28"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">基础篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/21819adc942949089018c44798f9d2aa"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">键入网址再按下回车，后面究竟发生了什么</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/0fb854ce15f84ba096c86a4636318dd0"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP报文：起始行、头部字段、消息正文</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/ba3d056f76284f4fa049cd3fea1366ba"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP请求方法：GET/HEAD/POST/PUT</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/162601c774144c44b6d73977ecccf342"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">URI/URL：scheme :// host:port path ?query</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/d3ef0f54dbec47ef9fe3fb21d9c8c210"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">响应状态码</strong></strong></span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/632e4304992240a68be4c7cc93036ce6"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">HTTP请求方法</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7765ab1595b6452ebf15b0e34647930e"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">进阶篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/32ca53661a7d4e4e9d8c00b3027122ce"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">安全篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/719ed1792b01499ab1a5e94741beb74d"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">飞翔篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/71e5a614b5854751898565d87c248d17"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">探索篇</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/e7c2a93ae9c541f6856b27fe754e5ae6"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">其他</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/7b2ea6db30be4d55a6c6ba06db0bf276"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">思维导图</span></span></div></a></li></ul><h2 id="https://www.notion.so/92da497802f541e9ba56674d95aadc1e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/92da497802f541e9ba56674d95aadc1e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">破冰篇</span></span></h2><h3 id="https://www.notion.so/16e9357e8d534704b9360bf23214d460" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/16e9357e8d534704b9360bf23214d460"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP过去</span></span></h3><div id="https://www.notion.so/12bab1cb5e4642f3a9edc1cf441c6e41" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">HTTP协议始于Tim Berners-Lee的一个论文，其中确定了URI统一资源标识符，HTML超文本标记语言，HTTP超文本传输协议。</span></span></p></div><div id="https://www.notion.so/5f776624f3444d229c8ec4dfd496e0d3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">HTTP/0.9是个简单的文本协议，只能获取文本资源；HTTP/1.0确立了大部分现在使用的技术，但它不是正是标准；HTTP/1.1是目前互联网上使用最广泛的协议，功能也非常完善；HTTP/2基于Google的SPDY协议，注重性能改善，但还未普及；HTTP/3基于Google的QUIC协议，是将来的发展方向。</span></span></p></div><h3 id="https://www.notion.so/de78da6688754368b744fa31e1240e9e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/de78da6688754368b744fa31e1240e9e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP是什么</span></span></h3><div id="https://www.notion.so/0a3f42f6b40749feaaf2cbb349b002e7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">协议：确定了一种计算机之间的交流通信规范，以及各种控制和错误处理方式。</span></span></p></div><div id="https://www.notion.so/24c29da825a54af1914ff891b71052ed" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">传输协议：双向协议（请求方和响应方，允许中间有中转）。</span></span></p></div><div id="https://www.notion.so/c2f6c2550a6541e8814e703ca2f79144" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">超文本：HTML，文字，图片，视频，超链接等。</span></span></p></div><div id="https://www.notion.so/a00a618bcddc47c0a5763f6a25799474" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">HTTP非常灵活，可以包装各种网络应用，使之可以用HTTP访问，如：微信网页版，邮箱网页版。</span></span></p></div><h3 id="https://www.notion.so/5f654059da2447d180daf90983baceb2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/5f654059da2447d180daf90983baceb2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP的各种概念：浏览器、服务器、CDN、爬虫、HTML、网络服务、WAF、TCP/IP、DNS、URI/URL、HTTPS、代理</span></span></h3><div id="https://www.notion.so/22bc09a585da48b28bbfbf70a5486eab" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">浏览器</strong></span><span class="SemanticString">：本质上是一个HTTP协议中的请求方。在HTTP协议中，浏览器的角色被称为User Agent用户代理，意思是作为访问者的”代理“来发起HTTP请求，所以我们也会称之为”客户端“。如：Chrome，FireFox，Safari，IE等。</span></span></p></div><div id="https://www.notion.so/99d379d3818f409283aca75657daa3fb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Web Server服务器</strong></span><span class="SemanticString">：HTTP协议中的响应方，包括硬件和软件。如：apache（老牌服务器，功能完善，学习门槛低），nginx（高性能，高稳定，易于扩展，适合高流量网站），IIS，Jetty/Tomcat（应用少）。</span></span></p></div><div id="https://www.notion.so/b3a727918757469189757c963b20e091" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">CDN</strong></span><span class="SemanticString">：浏览器和服务器中间的东西，叫内容分发网络，应用HTTP协议中的缓存和代理技术，代替源站响应客户端的请求。好处是浏览器的请求不用千里迢迢来到源站服务器，而是可以半路获取响应。作用是网络加速，负载均衡，安全防护，边缘计算，跨运营商网络。CDN无法缓存动态资源。</span></span></p></div><div id="https://www.notion.so/88cdd261281c4bd2a710f2a9b2e7eba6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">爬虫 crawler</strong></span><span class="SemanticString">：HTTP协议没规定用户代理必须是人，于是机器人即是爬虫。有爬虫和反爬虫，用robots.txt来约定什么可以爬什么不行。用到HTTP和HTML的技术。</span></span></p></div><div id="https://www.notion.so/fb9b351c34f640b880abbbc9cc627c24" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HTML</strong></span><span class="SemanticString">：HTML4和HTML是两个主要的标准。</span></span></p></div><div id="https://www.notion.so/34a344547017450e9963b977e92a00a8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">WebService</strong></span><span class="SemanticString">：不是Web server，是由W3C定义的应用服务开发规范，使用client-server架构，通常使用WSDL定义服务接口，使用HTTP协议传输XML或者SOAP消息。它是一个基于web（HTTP）的服务架构技术。如：服务器端用Linux+Java，客户端用Windows+C#。即该技术的实现是web server。</span></span></p></div><div id="https://www.notion.so/c6314dc4c2d7432483d0ae5c90ac51de" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">WAF</strong></span><span class="SemanticString">：网络应用防火墙，应用层面的防火墙，专门检测HTTP流量，防护Web应用的安全技术。通常位于Web服务器之前，阻止SQL注入，跨站脚本等。应用较多的开源项目是ModSecurity，可以集成到Apache和Nginx中。</span></span></p></div><div id="https://www.notion.so/621b4549f268414c864cc53e8ff4cccc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">TCP/IP</strong></span><span class="SemanticString">：一系列的网络通信协议统称，最核心的是TCP（传输层，传输控制协议，提供可靠字节流通信，数据不丢失且完整）和IP（网际层，IP协议，解决寻址和路由问题，v4v6），还有UDP，ICMP，ARP等。HTTP全称：HTTP over TCP/IP。</span></span></p></div><div id="https://www.notion.so/116bc330ec3b42049d617a5ef7ce9a4a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DNS</strong></span><span class="SemanticString">：IP难记，所以引入域名系统DNS。域名domain name又称主机名host，最右边是顶级域名。域名解析就是将域名转换映射到它真正的IP。</span></span></p></div><div id="https://www.notion.so/043f40eedf7842d09c321560fcf04993" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI/URL</strong></span><span class="SemanticString">：identifier统一资源标识符，可以唯一标记网上资源，包括协议名，主机名和路径，如：http://nginx.org/en/download.html；locator统一资源定位符，即网址，是URI子集。</span></span></p></div><div id="https://www.notion.so/f61b33c2968c4c839b58fce78bfa74a2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HTTPS</strong></span><span class="SemanticString">：全称HTTP over SSL/TLS，它是一个负责加密通信的协议，建立在TCP/IP之上，所以相当于HTTP+SSL/TLS+TCP/IP。SSL叫Secure Socket Layer（使用最新密码学成果），TLS叫Ttransport Layer Security。</span></span></p></div><div id="https://www.notion.so/4e6b0181bb9940af9bee9a17de7ef892" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">代理 proxy</strong></span><span class="SemanticString">：HTTP协议中请求方和响应方中间的中转站。很多种类，如：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">匿名代理</strong></span><span class="SemanticString">（完全隐匿的只能看到代理服务器），</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">透明代理</strong></span><span class="SemanticString">（外界知道代理也知道客户端），</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">正向代理</strong></span><span class="SemanticString">（靠近客户端，代表客户端向服务器发请求），</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">反向代理</strong></span><span class="SemanticString">（靠近服务器端，代表服务器响应客户端请求）。CDN是一种代理，扮演着透明代理和反向代理的角色。代理可以做：负载均衡（访问请求均匀分散到多台机子），内容缓存（暂存上下行数据减轻后端压力），安全防护（隐匿IP，使用WAF），数据处理（提供压缩加密）。</span></span></p></div><h3 id="https://www.notion.so/c705107a963a43d089fd0c6956378b77" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c705107a963a43d089fd0c6956378b77"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">四层和七层：TCP、OSI</span></span></h3><div id="https://www.notion.so/f4a0c01953524b6ea0a21bd1e2eec8fb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">TCP/IP网络分层模型</strong></span><span class="SemanticString">：四层，链接层（以太网、WiFi这样的底层网络上发送原始数据包，使用MAC地址，帧frame）-&gt;网际层（用IP地址取代MAC地址，把局域网广域网再接成一个虚拟的巨大网络，包package）-&gt;传输层（TCP连续的字节流有顺序，UDP分散的小数据包顺序发乱序接，段segment）-&gt;应用层（Telnet、SSH、FTP、SMTP，消息或报文message）。</span></span></p></div><div id="https://www.notion.so/a5a7d527a4274906b36716719662fbb5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">OSI网络分层模型</strong></span><span class="SemanticString">：open system interconnection reference model，七层，物理层-&gt;数据链路层-&gt;网络层-&gt;传输层-&gt;会话层-&gt;表示层-&gt;应用层。与TCP/IP有对应关系。</span></span></p></div><div id="https://www.notion.so/c4bdf67cc97f48cd85713306893a7caa" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">辨别：凡是由操作系统负责处理的就是四层或四层以下；凡是需要由应用程序负责处理的就是七层。</span></span></p></div><div id="https://www.notion.so/1c6c512f26b84c30be920d4f6595cdbb" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1b0c7065-5004-49b4-882f-b6b96d1d1d8e%2FUntitled.png?width=576&amp;table=block&amp;id=1c6c512f-26b8-4c30-be92-0d4f6595cdbb"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F1b0c7065-5004-49b4-882f-b6b96d1d1d8e%2FUntitled.png?width=576&amp;table=block&amp;id=1c6c512f-26b8-4c30-be92-0d4f6595cdbb" style="width:576px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ab7b7923b2164179b01819c983fb6953" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">四层负载均衡：工作在传输层上，基于TCP/IP协议的特性，例如IP地址，端口号等实现对后端服务器的负载均衡。</span></span></p></div><div id="https://www.notion.so/0bbe46501b7747f2a559c23ce571771b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">七层负载均衡：工作在应用层上，看到的是HTTP协议，解析HTTP报文里的URI、主机名、资源类型等数据，再用适当的策略转发给后端服务器。（区别是能否看到URI之类的）</span></span></p></div><h3 id="https://www.notion.so/6c85f731b16b41db9e67e1152ce23d79" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/6c85f731b16b41db9e67e1152ce23d79"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">域名与域名解析过程</span></span></h3><div id="https://www.notion.so/d7307e56a79a4f1c891ed31e58a68ffd" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">域名的形式：主机名.二级域名.顶级域名。</span></span></p></div><div id="https://www.notion.so/671daf232de64b3888ae79382cfd6739" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">域名解析：就像IP地址必须转换成MAC地址才能访问主机一样，域名也必须要转换成IP地址。如Nginx中，使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">server_name time.geekbang.org</code></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/bc50b534393f40b29e3b01d965ce9500" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DNS的核心系统</strong></span><span class="SemanticString">：1）root根域名服务器：返回com net cn等顶级域名的IP地址（全球13组，无数镜像）；2）top-level顶级域名服务器：管理各自域名下权威域名服务器，比如com顶级域名服务器可以返回apple.com的IP地址；3）authoritative 权威域名服务器：管理自己域名下主机的IP地址，比如apple.com返回www.apple.com的IP地址。</span></span></p></div><div id="https://www.notion.so/40a577d7dd274637b00bc4abe9665b1a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">两种减轻域名解析压力的手段</strong></span><span class="SemanticString">：基本思路是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">缓存</strong></span><span class="SemanticString">。1）许多大公司、网络运营商都会建立自己的DNS服务器，叫做非权威域名服务器，作为用户DNS的代理，查询IP地址，如果有了记录则直接返回IP。如Google的8.8.8.8，MSFT的4.2.2.1。2）操作系统也会对DNS解析结果做缓存，如果在缓存找不到也会搜/etc/hosts主机映射文件。如Nginx中，使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">resolver 8.8.8.8 valid=30s; #指定Google的DNS，缓存30秒</code></span><span class="SemanticString"> ，没有resolver则无法查询。</span></span></p></div><div id="https://www.notion.so/13e596a3ea1f471d94c358f8aa149484" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">域名其它功能：1）重定向。2）可以使用 bind9 等开源软件搭建一个在内部使用的 DNS，开发的各种内部服务就都用域名来标记。3）基于域名实现的负载均衡（见下）。4）域名屏蔽或域名劫持。</span></span></p></div><div id="https://www.notion.so/cb2552eb765a4e4f80f2b9b6ed45c89c" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb09bd917-ec01-41c8-8ede-92036a8722a2%2FUntitled.png?width=1385&amp;table=block&amp;id=cb2552eb-765a-4e4f-80f2-b9b6ed45c89c"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb09bd917-ec01-41c8-8ede-92036a8722a2%2FUntitled.png?width=1385&amp;table=block&amp;id=cb2552eb-765a-4e4f-80f2-b9b6ed45c89c" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/3f91276778a34cca8d35fbe6ed66170e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">问：在浏览器地址栏里随便输入一个不存在的域名，比如就叫“www. 不存在.com”，试着解释一下它的 DNS 解析过程。</strong></span></span></p></div><div id="https://www.notion.so/2b30decc351d436f95e8dece8a2e1f1f" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa04000c6-1b02-4e6a-9f90-52cef77571a8%2FUntitled.png?width=1447&amp;table=block&amp;id=2b30decc-351d-436f-95e8-dece8a2e1f1f"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa04000c6-1b02-4e6a-9f90-52cef77571a8%2FUntitled.png?width=1447&amp;table=block&amp;id=2b30decc-351d-436f-95e8-dece8a2e1f1f" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><h3 id="https://www.notion.so/73cc77cc0cec4910b39411c3bd3f2312" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/73cc77cc0cec4910b39411c3bd3f2312"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">实验工具：Wireshark、Chrome、OpenResty、Telnet</span></span></h3><div id="https://www.notion.so/77031c70b9c44664822027f6132925f8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们选择 Wireshark 作为抓包工具，捕获在 TCP/IP 协议栈中传输的所有流量；</span></span></p></div><div id="https://www.notion.so/fe63bc7af2684ff9baa9f3bc9b458cde" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们选择 Chrome 或 Firefox 浏览器作为 HTTP 协议中的 user agent；</span></span></p></div><div id="https://www.notion.so/7b9b19b2997f435e9c2523e1aa34e14c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们选择 OpenResty 作为 Web 服务器，它是一个 Nginx 的“强化包”，功能非常丰富；</span></span></p></div><div id="https://www.notion.so/427d1a911d7a40dd82f95f7039440840" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Telnet 是一个命令行工具，可用来登录主机模拟浏览器操作；</span></span></p></div><div id="https://www.notion.so/b3c69e5b03444abcb4152cad05a7ac5d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 GitHub 上可以下载到本专栏的专用项目源码，只要把 OpenResty 解压到里面即可完成实验环境的搭建。</span></span></p></div><h2 id="https://www.notion.so/eae8e51ee07a46928d1281bbd1eace28" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/eae8e51ee07a46928d1281bbd1eace28"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">基础篇</span></span></h2><h3 id="https://www.notion.so/21819adc942949089018c44798f9d2aa" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/21819adc942949089018c44798f9d2aa"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">键入网址再按下回车，后面究竟发生了什么</span></span></h3><div id="https://www.notion.so/b3808a5b47fa4168a99d48bf053834b5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用 IP 地址访问 Web 服务器：</strong></span></span></p></div><div id="https://www.notion.so/b224834ee73d4e95ba68db1ecffad87c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">1）浏览器从地址栏的输入中获得服务器的 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">IP 地址和端口号</strong></span><span class="SemanticString">；2）浏览器用 TCP 的三次握手与服务器建立连接；3）浏览器向服务器发送拼好的报文；4）服务器收到报文后处理请求，同样拼好报文再发给浏览器；5）浏览器解析报文，渲染输出页面。</span></span></p></div><div id="https://www.notion.so/e157e5bd2dd54822a1094994ab974a7e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">图里 TCP 关闭连接的“四次挥手”在抓包里没有出现，这是因为 HTTP/1.1 长连接特性，默认不会立即关闭连接。</span></span></p></div><div id="https://www.notion.so/96bfad202b554e438ec3458147d88ca7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">现代浏览器都会自动且秘密发送favicon.ico的请求。</span></span></p></div><div id="https://www.notion.so/da7af8aec9224f25b615b5ee87062422" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb219b8c2-3ffa-4150-97af-1432689b25f9%2FUntitled.png?width=432&amp;table=block&amp;id=da7af8ae-c922-4f25-b615-b5ee87062422"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb219b8c2-3ffa-4150-97af-1432689b25f9%2FUntitled.png?width=432&amp;table=block&amp;id=da7af8ae-c922-4f25-b615-b5ee87062422" style="width:432px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/1dff39824ca240e7ac944dbd8c97ee0a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">使用域名访问 Web 服务器：</strong></span></span></p></div><div id="https://www.notion.so/1699f17709a649b49bf91f3fe4228241" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2bc6472f-ec25-4340-97ed-3c4f1b9473d6%2FUntitled.png?width=624&amp;table=block&amp;id=1699f177-09a6-49b4-9bf9-1f3fe4228241"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F2bc6472f-ec25-4340-97ed-3c4f1b9473d6%2FUntitled.png?width=624&amp;table=block&amp;id=1699f177-09a6-49b4-9bf9-1f3fe4228241" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/258ee797025e4305a86d36e390cc48f2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">首先</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">要拿到IP地址</strong></span><span class="SemanticString">，这就要用 DNS 协议开始从操作系统、本地 DNS、根 DNS、顶级 DNS、权威 DNS 的层层解析，当然这中间有缓存，可能不会费太多时间就能拿到结果。有时候会拿到CDN 服务器而不是目标网站的实际地址。</span></span></p></div><div id="https://www.notion.so/f51eefbca326412f989f1cae44ec0879" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">目标网站的服务器对外表现的是一个 IP 地址</strong></span><span class="SemanticString">，但为了能够扛住高并发，在内部也是一套复杂的架构。通常在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">入口是负载均衡设备</strong></span><span class="SemanticString">，例如四层的 LVS 或者七层的 Nginx，在后面是许多的服务器，构成一个更强更稳定的集群。</span></span></p></div><div id="https://www.notion.so/54bd3c37948e4079b494381223678cc1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">负载均衡设备会先访问系统里的缓存服务器</strong></span><span class="SemanticString">，通常有 memory 级缓存 Redis 和 disk 级缓存 Varnish，它们的作用与 CDN 类似，不过是工作在内部网络里，把最频繁访问的数据缓存几秒钟或几分钟，减轻后端应用服务器的压力。</span></span></p></div><div id="https://www.notion.so/4387f6c8b9854fc68722f923105d9c6e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">如果缓存服务器里也没有，那么负载均衡设备就要把请求转发给应用服务器了</strong></span><span class="SemanticString">。这里就是各种开发框架大显神通的地方了，例如 Java 的 Tomcat/Netty/Jetty，Python 的 Django，还有 PHP、Node.js、Golang 等等。它们又会再访问后面的 MySQL、PostgreSQL、MongoDB 等数据库服务，实现用户登录、商品查询、购物下单、扣款支付等业务操作，然后把执行的结果返回给负载均衡设备，同时也可能给缓存服务器里也放一份。</span></span></p></div><div id="https://www.notion.so/bd136ede7d4c448788db9e96da9d29cc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">应用服务器的输出到了负载均衡设备这里，请求的处理就算是完成了，就要按照原路再走回去</strong></span><span class="SemanticString">，还是要经过许多的路由器、网关、代理。如果这个资源允许缓存，那么</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">经过 CDN 的时候它也会做缓存</strong></span><span class="SemanticString">，这样下次同样的请求就不会到达源站了。</span></span></p></div><div id="https://www.notion.so/6e705323a3414f97a3a299b961872a1b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">最后网站的响应数据回到了你的设备，它可能是 HTML、JSON、图片或者其他格式的数据，需要由浏览器解析处理才能显示出来，如果数据里面还有超链接，指向别的资源，那么就又要重走一遍整个流程，直到所有的资源都下载完。</span></span></p></div><h3 id="https://www.notion.so/0fb854ce15f84ba096c86a4636318dd0" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/0fb854ce15f84ba096c86a4636318dd0"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP报文：起始行、头部字段、消息正文</span></span></h3><div id="https://www.notion.so/7e3b852a7ad64a0a967db8f38ceee17f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">HTTP 协议与 TCP/UDP 类似，但不同在：它是一个“纯文本”的协议，所以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">头数据都是 ASCII 码的文本</strong></span><span class="SemanticString">，可以很容易地用肉眼阅读，不用借助程序解析也能够看懂。TCP报文格式如下：</span></span></p></div><div id="https://www.notion.so/c9c0c336d71547ee9a99f6583165655f" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4220e47b-d058-4118-af34-1fcdacfe3259%2FUntitled.png?width=624&amp;table=block&amp;id=c9c0c336-d715-47ee-9a99-f6583165655f"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F4220e47b-d058-4118-af34-1fcdacfe3259%2FUntitled.png?width=624&amp;table=block&amp;id=c9c0c336-d715-47ee-9a99-f6583165655f" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/85599466ea7947559527bb37e64b258c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HTTP 协议的请求报文和响应报文的结构</strong></span><span class="SemanticString">基本相同，由三大部分组成：1）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">起始行</strong></span><span class="SemanticString">（start line）：描述请求或响应的基本信息；2）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">头部字段集合</strong></span><span class="SemanticString">（header）：使用 key-value 形式更详细地说明报文；3）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">消息正文</strong></span><span class="SemanticString">（entity）：实际传输的数据，它不一定是纯文本，可以是图片、视频等二进制数据。前两部分起始行和头部字段经常又合称为“请求头”或“响应头”。</span></span></p></div><div id="https://www.notion.so/d358f5392ea844b89ccbc6cc7855009a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">HTTP 协议规定报文</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">必须有 header，但可以没有 body，而且在 header 之后必须要有一个“空行”</strong></span><span class="SemanticString">，也就是“CRLF”，十六进制的“0D0A”。虽然 HTTP 协议对 header 的大小没有做限制，但各个 Web 服务器都不允许过大的请求头，因为头部太大可能会占用大量的服务器资源，影响运行效率。</span></span></p></div><div id="https://www.notion.so/804601c984934be0ac6168c0fc912cde" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5887c8b2-4fc3-4382-9c7e-f44699004759%2FUntitled.png?width=624&amp;table=block&amp;id=804601c9-8493-4be0-ac61-68c0fc912cde"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F5887c8b2-4fc3-4382-9c7e-f44699004759%2FUntitled.png?width=624&amp;table=block&amp;id=804601c9-8493-4be0-ac61-68c0fc912cde" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/617d94554ba44a78922a6458db400b3d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">起始行</strong></span></span></p></div><div id="https://www.notion.so/6f958efc0a8647c2b1ce42cf746a3a66" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">请求行</strong></span><span class="SemanticString">：请求报文里的起始行也就是请求行（request line），它简要地描述了</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">客户端想要如何操作服务器端的资源</strong></span><span class="SemanticString">。如：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">GET / HTTP/1.1</code></span></span></p></div><div id="https://www.notion.so/5e4e58c1370f4763a68a69eb192d357f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">请求行的三部分组成</strong></span><span class="SemanticString">：1）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">请求方法</strong></span><span class="SemanticString">：是一个动词，如 GET/POST，表示对资源的操作；2）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">请求目标</strong></span><span class="SemanticString">：通常是一个 URI，标记了请求方法要操作的资源；3）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">版本号</strong></span><span class="SemanticString">：表示报文使用的 HTTP 协议版本。这三个部分通常使用空格（space）来分隔，最后要用 CRLF 换行表示结束。</span></span></p></div><div id="https://www.notion.so/6314b91167794751a260ca2beae3a2a8" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F833ddc58-4812-46f2-892c-f393b7de3940%2FUntitled.png?width=3000&amp;table=block&amp;id=6314b911-6779-4751-a260-ca2beae3a2a8"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F833ddc58-4812-46f2-892c-f393b7de3940%2FUntitled.png?width=3000&amp;table=block&amp;id=6314b911-6779-4751-a260-ca2beae3a2a8" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/894a341289b943cabc721ca76ceeeb3b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">状态行</strong></span><span class="SemanticString">：响应报文里的起始行，在这里它不叫“响应行”，而是叫“状态行”（status line），意思是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">服务器响应的状态</strong></span><span class="SemanticString">。如：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">HTTP/1.1 200 OK</code></span></span></p></div><div id="https://www.notion.so/f40caf9c7b64497ca0185d5ec5aad303" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">状态行的三部分组成</strong></span><span class="SemanticString">：1）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">版本号</strong></span><span class="SemanticString">：表示报文使用的 HTTP 协议版本；2）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">状态码</strong></span><span class="SemanticString">：一个三位数，用代码的形式表示处理的结果，比如 200 是成功，500 是服务器错误；3）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">原因</strong></span><span class="SemanticString">：作为数字状态码补充，是更详细的解释文字，帮助人理解原因。</span></span></p></div><div id="https://www.notion.so/085ffcac413042e086cd3ce5475f2c30" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fca554ac3-8a90-443c-905c-7e0e6b4c7797%2FUntitled.png?width=3000&amp;table=block&amp;id=085ffcac-4130-42e0-86cd-3ce5475f2c30"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fca554ac3-8a90-443c-905c-7e0e6b4c7797%2FUntitled.png?width=3000&amp;table=block&amp;id=085ffcac-4130-42e0-86cd-3ce5475f2c30" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/21e9dcd53e714808bdae7ae1dbf20722" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">头部字段</strong></span></span></p></div><div id="https://www.notion.so/1893905027de40899bae9da81ff3e9e5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">头部字段</strong></span><span class="SemanticString">是 key-value 的形式，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">key 和 value 之间用“:”分隔</strong></span><span class="SemanticString">，最后用 CRLF 换行表示字段结束。比如在“Host: 127.0.0.1”这一行里 key 就是“Host”，value 就是“127.0.0.1”。HTTP 头字段非常灵活，不仅可以使用标准里的 Host、Connection 等已有头，也可以任意添加自定义头，这就给 HTTP 协议带来了无限的扩展可能。</span></span></p></div><div id="https://www.notion.so/8ebb0ad15e5f40d7b6ac689700d8bfdd" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F71733899-4a61-4952-943c-f6d40297a07d%2FUntitled.png?width=384&amp;table=block&amp;id=8ebb0ad1-5e5f-40d7-b6ac-689700d8bfdd"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F71733899-4a61-4952-943c-f6d40297a07d%2FUntitled.png?width=384&amp;table=block&amp;id=8ebb0ad1-5e5f-40d7-b6ac-689700d8bfdd" style="width:384px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/a2b8b9dcede84f8da4e4ad0088242c3e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">不过使用</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">头字段需要注意下面几点</strong></span><span class="SemanticString">：</span></span></p></div><div id="https://www.notion.so/fcc6169740eb4721b0cf7c1a6a98682a" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F68c7263e-1e99-4745-a06c-78b107a3445c%2FUntitled.png?width=672&amp;table=block&amp;id=fcc61697-40eb-4721-b0cf-7c1a6a98682a"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F68c7263e-1e99-4745-a06c-78b107a3445c%2FUntitled.png?width=672&amp;table=block&amp;id=fcc61697-40eb-4721-b0cf-7c1a6a98682a" style="width:672px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/a3c2e4896b61466a83338a7d7b017065" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">常用的头字段</strong></span><span class="SemanticString">：1）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">通用字段</strong></span><span class="SemanticString">：在请求头和响应头里都可以出现；2）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">请求字段</strong></span><span class="SemanticString">：仅能出现在请求头里，进一步说明请求信息或者额外的附加条件；3）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">响应字段</strong></span><span class="SemanticString">：仅能出现在响应头里，补充说明响应报文的信息；4）</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">实体字段</strong></span><span class="SemanticString">：它实际上属于通用字段，但专门描述 body 的额外信息。</span></span></p></div><div id="https://www.notion.so/ab0e65ea06164fe5a0a1403103ff4b0d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Host </strong></span><span class="SemanticString">字段：它属于请求字段，只能出现在请求头里，它同时也是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">唯一一个 HTTP/1.1 规范里要求必须出现的字段</strong></span><span class="SemanticString">，也就是说，如果请求头里没有 Host，那这就是一个错误的报文。</span></span></p></div><div id="https://www.notion.so/16c7f93b35d5468d829dedf46ed7cd9f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">User-Agent </strong></span><span class="SemanticString">字段：请求字段，只出现在请求头里。它使用一个字符串来描述发起 HTTP 请求的客户端，服务器可以依据它来返回最合适此浏览器显示的页面。但由于历史的原因，User-Agent 非常混乱，每个浏览器都自称是“Mozilla”“Chrome”“Safari”，企图使用这个字段来互相“伪装”，导致 User-Agent 变得越来越长，最终变得毫无意义。</span></span></p></div><div id="https://www.notion.so/1d23dfb546ec4fa38712651901892d72" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Date </strong></span><span class="SemanticString">字段：是一个通用字段，但通常出现在响应头里，表示 HTTP 报文创建的时间，客户端可以使用这个时间再搭配其他字段决定缓存策略。</span></span></p></div><div id="https://www.notion.so/22dcefab567a40218018f6323033d474" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Server</strong></span><span class="SemanticString"> 字段：是响应字段，只能出现在响应头里。它告诉客户端当前正在提供 Web 服务的软件名称和版本号，例如在我们的实验环境里它就是“Server: openresty/1.15.8.1”，即使用的是 OpenResty 1.15.8.1。但由于安全问题，有的网站响应头里要么没有这个字段，要么就给出一个完全无关的描述信息。比如 GitHub，它的 Server 字段里就看不出是使用了 Apache 还是 Nginx，只是显示为“GitHub.com”。</span></span></p></div><div id="https://www.notion.so/7c449ea8e0de42879bb3c7ee932b7f0c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Content-Length</strong></span><span class="SemanticString"> 字段：实体字段，它表示报文里 body 的长度，也就是请求头或响应头空行后面数据的长度。服务器看到这个字段，就知道了后续有多少数据，可以直接接收。如果没有这个字段，那么 body 就是不定长的，需要使用 chunked 方式分段传输。</span></span></p></div><h3 id="https://www.notion.so/ba3d056f76284f4fa049cd3fea1366ba" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/ba3d056f76284f4fa049cd3fea1366ba"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP请求方法：GET/HEAD/POST/PUT</span></span></h3><div id="https://www.notion.so/339a1f2d6a5f41518447f53dfde64386" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">标准请求方法：要求服务器端对 URI 定位的资源执行这个动作。目前 HTTP/1.1 规定了</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">八种方法</strong></span><span class="SemanticString">，单词都必须是大写的形式。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">GET</strong></span><span class="SemanticString">：获取资源，可以理解为读取或者下载数据；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HEAD</strong></span><span class="SemanticString">：获取资源的元信息；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">POST</strong></span><span class="SemanticString">：向资源提交数据，相当于写入或上传数据；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">PUT</strong></span><span class="SemanticString">：类似 POST；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">DELETE</strong></span><span class="SemanticString">：删除资源；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">CONNECT</strong></span><span class="SemanticString">：建立特殊的连接隧道；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">OPTIONS</strong></span><span class="SemanticString">：列出可对资源实行的方法；</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">TRACE</strong></span><span class="SemanticString">：追踪请求 - 响应的传输路径。前四个常用。</span></span></p></div><div id="https://www.notion.so/dce0c60f8f4446f0af1f00bc76f7436e" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa8d0cc10-ecc7-442e-a2bc-511c957e47f1%2FUntitled.png?width=576&amp;table=block&amp;id=dce0c60f-8f44-46f0-af1f-00bc76f7436e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fa8d0cc10-ecc7-442e-a2bc-511c957e47f1%2FUntitled.png?width=576&amp;table=block&amp;id=dce0c60f-8f44-46f0-af1f-00bc76f7436e" style="width:576px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/ae0a24c2b2d343cca2d34b4c11d22d9f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">比如，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">你发起了一个 GET 请求，想获取“/orders”这个文件，但这个文件保密级别比较高，不是谁都能看的，服务器就可以有如下的几种响应方式</strong></span><span class="SemanticString">：1）假装这个文件不存在，直接返回一个 404 Not found 报文；2）稍微友好一点，明确告诉你有这个文件，但不允许访问，返回一个 403 Forbidden；3）再宽松一些，返回 405 Method Not Allowed，然后用 Allow 头告诉你可以用 HEAD 方法获取文件的元信息。</span></span></p></div><div id="https://www.notion.so/1425f1714c264107866efbc79be797ff" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">常用的四种方法</strong></span></span></p></div><div id="https://www.notion.so/113785e573bc4a49a705714a80273ee7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">GET</strong></span><span class="SemanticString">：请求</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">从服务器获取资源</strong></span><span class="SemanticString">。GET 方法虽然基本动作比较简单，但</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">搭配 URI 和其他头字段就能实现对资源更精细的操作</strong></span><span class="SemanticString">。例如，在 URI 后使用“#”，就可以在获取页面后直接定位到某个标签所在的位置；使用 If-Modified-Since 字段就变成了“有条件的请求”，仅当资源被修改时才会执行获取动作；使用 Range 字段就是“范围请求”，只获取资源的一部分数据。</span></span></p></div><div id="https://www.notion.so/3be48fc35d884b29ae7bed9f4a185df5" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HEAD</strong></span><span class="SemanticString">：与 GET 方法类似，也是请求从服务器获取资源，服务器的处理机制也是一样的，但服务器不会返回请求的实体数据，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">只会传回响应头，也就是资源的“元信息”</strong></span><span class="SemanticString">。它</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">用在不真正需要资源的场合</strong></span><span class="SemanticString">，避免传输 body 数据的浪费。比如，想要检查一个文件是否存在，只要发个 HEAD 请求就可以了，没有必要用 GET 把整个文件都取下来。再比如，要检查文件是否有最新版本，同样也应该用 HEAD，服务器会在响应头里把文件的修改时间传回来。</span></span></p></div><div id="https://www.notion.so/fe03be23581d4b258e0bd054c5def203" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">POST</strong></span><span class="SemanticString">：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">向 URI 指定的资源提交数据</strong></span><span class="SemanticString">，数据就放在报文的 body 里。POST 也是一个经常用到的请求方法，使用频率应该是仅次于 GET，应用的场景也非常多，只要向服务器发送数据，用的大多数都是 POST。通常 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">POST 表示的是“新建”“create”</strong></span><span class="SemanticString">的含义。</span></span></p></div><div id="https://www.notion.so/0617cbf7b0af4eedb2128e5da9d287f6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">PUT</strong></span><span class="SemanticString">：与 POST 类似，也可以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">向服务器提交数据</strong></span><span class="SemanticString">，但与 POST 存在微妙的不同，通常 POST 表示的是“新建”“create”的含义，而</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"> PUT 则是“修改”“update”</strong></span><span class="SemanticString">的含义。在实际应用中，PUT 用到的比较少。而且，因为它与 POST 的语义、功能太过近似，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">有的服务器甚至就直接禁止使用 PUT 方法</strong></span><span class="SemanticString">，只用 POST 方法上传数据。</span></span></p></div><div id="https://www.notion.so/8f79bfc26abf46e98e879adb9b667211" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">其他方法</strong></span></span></p></div><div id="https://www.notion.so/61bc0eb301c74be68454bbc2cc036aac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">DELETE：指示服务器删除资源，因为这个动作危险性太大，所以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">通常服务器不会执行真正的删除操作，而是对资源做一个删除标记</strong></span><span class="SemanticString">。当然，更多的时候服务器就直接不处理 DELETE 请求。</span></span></p></div><div id="https://www.notion.so/fe5cedba84ee4a4fa866f37f8d7df04d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">CONNECT：是一个比较特殊的方法，要求服务器为客户端和另一台远程服务器建立一条特殊的连接隧道，这时 Web 服务器在中间充当了代理的角色。</span></span></p></div><div id="https://www.notion.so/d1e56d0b58ae40e1b209d31afdb633ef" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">OPTIONS：要求服务器列出可对资源实行的操作方法，在响应头的 Allow 字段里返回。它的功能很有限，用处也不大，有的服务器（例如 Nginx）干脆就没有实现对它的支持。</span></span></p></div><div id="https://www.notion.so/0f6062932f3d4e468e35d8e6a1102701" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">TRACE：多用于对 HTTP 链路的测试或诊断，可以显示出请求 - 响应的传输路径。它的本意是好的，但存在漏洞，会泄漏网站的信息，所以 Web 服务器通常也是禁止使用。</span></span></p></div><div id="https://www.notion.so/d13c2bc795b2449299e48dc474509c21" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">扩展方法</strong></span></span></p></div><div id="https://www.notion.so/73fa68802c4a4243a819f239f7a56c41" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">有一些得到了实际应用的请求方法（WebDAV），例如 MKCOL、COPY、MOVE、LOCK、UNLOCK、PATCH 等。如果有合适的场景，你也可以把它们应用到自己的系统里，比如用 LOCK 方法锁定资源暂时不允许修改，或者使用 PATCH 方法给资源打个小补丁，部分更新数据。但因为这些方法是非标准的，所以需要为客户端和服务器编写额外的代码才能添加支持。也可以根据需求创建方法。</span></span></p></div><div id="https://www.notion.so/a9b87af9c94644f093a0bd0acb42fdaf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">安全与幂等</strong></span></span></p></div><div id="https://www.notion.so/d27b7fd45c524eb7b84d74dd7ed5027c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">安全：指请求方法不会“破坏”服务器上的资源，即</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">不会对服务器上的资源造成实质的修改</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/dce9635f9cca4271852d98ee0a0e04a3" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">幂等：意思是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">多次执行相同的操作，结果也都是相同的</strong></span><span class="SemanticString">，即多次“幂”后结果“相等”。</span></span></p></div><h3 id="https://www.notion.so/162601c774144c44b6d73977ecccf342" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/162601c774144c44b6d73977ecccf342"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">URI/URL：scheme :// host:port path ?query</span></span></h3><div id="https://www.notion.so/2a41075370d94c998b3ec0255b9471c2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI=URL</strong></span><span class="SemanticString">：严格地说，URI 不完全等同于网址，它包含有 URL 和 URN 两个部分，在 HTTP 世界里用的网址实际上是 URL——统一资源定位符（Uniform Resource Locator）。但因为 URL 实在是太普及了，所以常常把这两者简单地视为相等。URI的作用是唯一地标记资源的位置或者名字，“资源”既可以是存在磁盘上的静态文本、页面数据，也可以是由 Java、PHP 提供的动态服务。</span></span></p></div><div id="https://www.notion.so/45b1bb6093274f1480ebf948af8caf63" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 一般形式</strong></span></span></p></div><div id="https://www.notion.so/77fb572696a840a58b8a661151be8b6e" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7f029118-8040-41b8-9dac-404747455612%2FUntitled.png?width=1548&amp;table=block&amp;id=77fb5726-96a8-40a5-8b8a-661151be8b6e"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7f029118-8040-41b8-9dac-404747455612%2FUntitled.png?width=1548&amp;table=block&amp;id=77fb5726-96a8-40a5-8b8a-661151be8b6e" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/32eea8b4f0f34bb9a4fb2683f05002d7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">scheme</strong></span><span class="SemanticString">：翻译成中文叫“方案名”或者“协议名”，表示</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">资源应该使用哪种协议来访问</strong></span><span class="SemanticString">。最常见的当然就是“http”了，表示使用 HTTP 协议。另外还有“https”，表示使用经过加密、安全的 HTTPS 协议。此外还有其他不是很常见的 scheme，例如 ftp、ldap、file、news 等。</span></span></p></div><div id="https://www.notion.so/5ae42508e60a45569f7b91d6c6fdf214" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">host:port</strong></span><span class="SemanticString">：在“://”之后，是被称为“authority”的部分，表示</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">资源所在的主机名</strong></span><span class="SemanticString">，通常的形式是“host:port”，即主机名加端口号。主机名必须有，但端口号有时可以省略，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">浏览器等客户端会依据 scheme 使用默认的端口号</strong></span><span class="SemanticString">，例如 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HTTP 的默认端口号是 80</strong></span><span class="SemanticString">，</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">HTTPS 的默认端口号是 443</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/be3644ee905049099cc0dce8c60dcd0e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">path</strong></span><span class="SemanticString">：标记资源所在位置的 path，浏览器就可以</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">连接服务器访问资源了</strong></span><span class="SemanticString">。URI 里 path 采用了类似文件系统“目录”“路径”的表示方式，因为早期互联网上的计算机多是 UNIX 系统，所以采用了 UNIX 的“/”风格。请注意：</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 的 path 部分必须以“/”开始，“/”不属于 host:port 内容</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/970c4634d97d40fea83af4f2ca50e579" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">特殊例子：</span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">file:///D:/http_study/www/</code></span><span class="SemanticString"> 中，“///”是因为”/”是主机名，file 类型 URI 的“特例”，它允许省略主机名，默认是本机 localhost。但对于 HTTP 或 HTTPS 这样的网络通信协议，主机名是绝对不能省略的。</span></span></p></div><div id="https://www.notion.so/1b7aaf46bab4434094d34298aa25fd1b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">注意：客户端和服务器看到的 URI 是不一样的。</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">客户端看到的必须是完整的 URI</strong></span><span class="SemanticString">，使用特定的协议去连接特定的主机，而服务器看到的只是报文请求行里被删除了协议名和主机名的 URI，指的是真正 </span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 里的 path 和后续的部分</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/7b0e95e662494dc9b28886fd62dca8f1" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 的查询参数</strong></span></span></p></div><div id="https://www.notion.so/d245a06117b444608b816313a2b123a9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">引入原因：使用“协议名 + 主机名 + 路径”的方式，已经可以精确定位网络上的任何资源了。但这还不够，很多时候我们还想</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">在操作资源的时候附加一些额外的修饰参数</strong></span><span class="SemanticString">。举几个例子：获取商品图片，但想要一个 32×32 的缩略图版本；获取商品列表，但要按某种规则做分页和排序；跳转页面，但想要标记跳转前的原始页面。</span></span></p></div><div id="https://www.notion.so/2ea978b696d547158bb6353adb73eb04" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">query</strong></span><span class="SemanticString">：URI 后面还有一个“query”部分，它</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">在 path 之后，用一个“?”开始，但不包含“?”，表示对资源附加的额外要求</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/ce43360d8e624502b810ed520c73077a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">查询参数 query 的格式</strong></span><span class="SemanticString">：是</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">多个“key=value”的字符串，这些 KV 值用字符“&amp;”连接</strong></span><span class="SemanticString">，浏览器和服务器都可以按照这个格式把长串的查询参数解析成可理解的字典或关联数组形式。</span></span></p></div><div id="https://www.notion.so/c7c57f34793142b58d47b77df1f38a48" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">注意：如果</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">查询参数过长，可以使用GET方法放在body里面请求服务器</strong></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/cfcc883e1a3444589697f24fc840b5ac" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 的完整格式</strong></span></span></p></div><div id="https://www.notion.so/1c4b699858fe4a26b53db4d7962d12e0" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F9e4e481f-4eba-4aa7-a1dd-ee0e6704fa1f%2FUntitled.png?width=2023&amp;table=block&amp;id=1c4b6998-58fe-4a26-b53d-b4d7962d12e0"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F9e4e481f-4eba-4aa7-a1dd-ee0e6704fa1f%2FUntitled.png?width=2023&amp;table=block&amp;id=1c4b6998-58fe-4a26-b53d-b4d7962d12e0" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/1ba21214249847e8be4d77deca97f7d5" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd26efa09-0c74-427a-ba95-1e52c861216f%2FUntitled.png?width=624&amp;table=block&amp;id=1ba21214-2498-47e8-be4d-77deca97f7d5"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fd26efa09-0c74-427a-ba95-1e52c861216f%2FUntitled.png?width=624&amp;table=block&amp;id=1ba21214-2498-47e8-be4d-77deca97f7d5" style="width:624px"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/3735334e5c8243d6b1c5d9170eeb9d43" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 的编码</strong></span></span></p></div><div id="https://www.notion.so/78c18a72839f46ba82fbcc311d429d9f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">引入原因：在 URI 里只能使用 ASCII 码，但如果要在 URI 里使用英语以外的汉语、日语等其他语言该怎么办呢？还有，某些特殊的 URI，会在 path、query 里出现“@&amp;?&quot;等起界定符作用的字符，会导致 URI 解析错误，这时又该怎么办呢？</span></span></p></div><div id="https://www.notion.so/a49042b481594240818b36c1e0e78b5c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">URI 的编码机制</strong></span><span class="SemanticString">：把字符（unicode）编码成utf-8，utf-8是用1-4个字节表示的，所以每个字节转换成16进制并在前面用百分号（%）连接，最后并把每个字节转换的结果连接起来。</span></span></p></div><div id="https://www.notion.so/418a7aff32f94eb0be0bfbce79fb981d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">注意：HTML转义用的“&amp;#”，URI转义用的“%”。</span></span></p></div><h3 id="https://www.notion.so/d3ef0f54dbec47ef9fe3fb21d9c8c210" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/d3ef0f54dbec47ef9fe3fb21d9c8c210"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">响应状态码</strong></strong></span></span></h3><div id="https://www.notion.so/40fc6fd0ff664b1ca58b2d25b0796d87" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h3 id="https://www.notion.so/632e4304992240a68be4c7cc93036ce6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/632e4304992240a68be4c7cc93036ce6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">HTTP请求方法</span></span></h3><h2 id="https://www.notion.so/7765ab1595b6452ebf15b0e34647930e" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7765ab1595b6452ebf15b0e34647930e"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">进阶篇</span></span></h2><h2 id="https://www.notion.so/32ca53661a7d4e4e9d8c00b3027122ce" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/32ca53661a7d4e4e9d8c00b3027122ce"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">安全篇</span></span></h2><h2 id="https://www.notion.so/719ed1792b01499ab1a5e94741beb74d" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/719ed1792b01499ab1a5e94741beb74d"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">飞翔篇</span></span></h2><h2 id="https://www.notion.so/71e5a614b5854751898565d87c248d17" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/71e5a614b5854751898565d87c248d17"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">探索篇</span></span></h2><h2 id="https://www.notion.so/e7c2a93ae9c541f6856b27fe754e5ae6" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/e7c2a93ae9c541f6856b27fe754e5ae6"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">其他</span></span></h2><div id="https://www.notion.so/5162ba6e5cc441378871ca4e080cee9f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/e677dd73ae3e4ad0bc63062f57a923f6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h2 id="https://www.notion.so/7b2ea6db30be4d55a6c6ba06db0bf276" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/7b2ea6db30be4d55a6c6ba06db0bf276"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">思维导图</span></span></h2><div id="https://www.notion.so/5a486b6c5fce41e9989a7aeeb79a840c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">左边偏理论，右边偏实际。</span></span></p></div><div id="https://www.notion.so/72e79d8b635942c383566b6347b4b784" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbf184e91-3665-4d79-ab28-735423237b6e%2F0b1034103daef8dccc2a270051e8ba0.jpg?width=2065&amp;table=block&amp;id=72e79d8b-6359-42c3-8356-6b6347b4b784"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fbf184e91-3665-4d79-ab28-735423237b6e%2F0b1034103daef8dccc2a270051e8ba0.jpg?width=2065&amp;table=block&amp;id=72e79d8b-6359-42c3-8356-6b6347b4b784" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div><div id="https://www.notion.so/c2e6ff1b49a943acad2c47ec2de87afb" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fada02f3f-3249-47bc-9ecc-f124f903882c%2FUntitled.png?width=1350&amp;table=block&amp;id=c2e6ff1b-49a9-43ac-ad2c-47ec2de87afb"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fada02f3f-3249-47bc-9ecc-f124f903882c%2FUntitled.png?width=1350&amp;table=block&amp;id=c2e6ff1b-49a9-43ac-ad2c-47ec2de87afb" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></article>
    <aside class="Aside">
        <a href="#content-html"><div id="up">👆</div></a>
        <a href="#message-board"><div id="down">👇</div></a>
    </aside>
    <div id="message-board"></div>
    <script src="https://utteranc.es/client.js"
        repo="Iris1e27/Iris1e27.github.io"
        issue-term="pathname"
        label="✨"
        theme="github-light"
        crossorigin="anonymous"
        async>
    </script>
  <footer class="Footer">
  <div>&copy; Jingtian的博客 2022</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
